<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analyse CSP — GROOM™</title>

<style>
    body {
        margin: 0;
        background: #000;
        color: #e6e6e6;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        padding: 25px;
        text-align: center;
    }

    h1 {
        font-size: 26px;
        font-weight: 600;
        margin-bottom: 8px;
    }

    h2 {
        font-size: 22px;
        margin-top: 25px;
        margin-bottom: 10px;
        font-weight: 600;
    }

    p {
        font-size: 15px;
        color: #bfbfbf;
        line-height: 1.6;
    }

    .card {
        background: #0f0f0f;
        border: 1px solid #1c1c1c;
        border-radius: 14px;
        padding: 20px;
        margin-top: 25px;
        text-align: left;
        max-width: 480px;
        margin-left: auto;
        margin-right: auto;
    }

    .metric {
        font-size: 16px;
        margin-bottom: 6px;
        color: #dcdcdc;
    }

    .score {
        font-size: 34px;
        font-weight: 700;
        color: #d4af37;
        margin: 15px 0;
    }

    .cta-btn {
        display: block;
        width: 100%;
        padding: 14px;
        background: #000;
        border: 1px solid #d4af37;
        border-radius: 10px;
        color: #fff;
        text-decoration: none;
        font-size: 16px;
        font-weight: 600;
        margin-top: 35px;
        transition: 0.25s;
        text-align: center;
    }
    .cta-btn:hover {
        background: #111;
        border-color: #f2c94c;
        box-shadow: 0 0 12px rgba(212,175,55,0.4);
    }

    /* POPUP IA */
    #loadingPopup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.85);
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        backdrop-filter: blur(3px);
        font-size: 16px;
        text-align: center;
    }

    .loader {
        border: 4px solid #333;
        border-top: 4px solid #d4af37;
        border-radius: 50%;
        width: 55px;
        height: 55px;
        animation: spin 0.9s linear infinite;
        margin-bottom: 18px;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
</head>

<body>

<!-- POPUP DE CHARGEMENT IA -->
<div id="loadingPopup">
    <div class="loader"></div>
    <p>Analyse IA en cours…</p>
</div>

<h1>Analyse GROOM™</h1>
<p id="bizName">Analyse en cours...</p>

<div class="card">
    <div class="score" id="scoreFinal">--</div>
    <p style="text-align:center;">Score global de potentiel</p>

    <div id="details"></div>
</div>

<a href="https://wa.me/message/RGYKG6GSQFCDG1" class="cta-btn">
    Lancer mon business maintenant →
</a>

<script>
// Popup de chargement (1.8 seconde)
setTimeout(() => {
    document.getElementById("loadingPopup").style.display = "none";
}, 1800);

// Récupérer le business dans l'URL
const params = new URLSearchParams(window.location.search);
const businessName = params.get("business");

// Titre de la page
document.getElementById("bizName").innerText = businessName;

// Charger le JSON
fetch("data.json")
    .then(r => r.json())
    .then(data => {

        const biz = data.find(b => b.name === businessName);

        if (!biz) {
            document.getElementById("details").innerHTML = "<p>Business introuvable.</p>";
            return;
        }

        // Génération score final
        const score = Math.round((biz.conversion + biz.demande + (biz.note*20)) / 3);
        document.getElementById("scoreFinal").innerText = score + "/100";

        // Analyse intelligente IA
        let analyse = "";

        if (score > 80) {
            analyse = "Très forte opportunité. La demande est élevée et la capacité de conversion est excellente. Forte recommandation GROOM™.";
        } else if (score > 65) {
            analyse = "Bonne opportunité. Potentiel solide avec une bonne stabilité. Peut performer rapidement avec une bonne stratégie.";
        } else if (score > 50) {
            analyse = "Opportunité moyenne. Ce business peut fonctionner mais nécessite une stratégie intelligente et de la patience.";
        } else {
            analyse = "Risque élevé. Business instable. GROOM™ recommande de choisir une alternative plus stable.";
        }

        // Affichage
        document.getElementById("details").innerHTML = `
            <div class="metric">Catégorie : ${biz.category}</div>
            <div class="metric">Conversion : ${biz.conversion}%</div>
            <div class="metric">Note : ${biz.note}/5</div>
            <div class="metric">Demande : ${biz.demande}%</div>
            <div class="metric">Estimation : ${biz.estimation}</div>
            
            <h2>Analyse IA</h2>
            <p>${analyse}</p>
        `;
    });
</script>

</body>
</html>
